<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace 속성은 현재 XML 파일을 나타내는 ID와 같은 정보 -->
<mapper namespace="StoreReviewMapper">

<!-- 리뷰 작성 -->
<insert id="writeReview" parameterType="review">
insert into star_bulletin
(store_code, member_id, sb_score, sb_content, sb_image, sb_c_date, sb_u_date)
values
(#{store_code}, #{member_id}, #{sb_score}, #{sb_content}, #{sb_image}, now(), now())
</insert>


<select id="allReview" parameterType="map" resultType="review">
select * from star_bulletin
where store_code = #{store_code}
order by sb_no desc
limit #{start}, #{end}
</select>



<select id="reviewCount" parameterType="review" resultType="java.lang.Integer">
select count(if(store_code= #{store_code}, store_code, null)) from star_bulletin;
</select> 
</mapper>